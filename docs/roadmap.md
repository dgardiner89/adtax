# Ad Generator Mini-App ‚Äî Project Plan  
**Version 1.0**

This document outlines the full plan for a small tool that connects to a Figma plugin, imports creative images, processes them through an LLM, and produces structured ad copy (headlines, primary texts, and descriptions). The UI then displays the creative set with download options and copy-to-clipboard actions for each text variant.

---

# 1. High-Level Flow

1. **Designer** selects frames in Figma.  
2. **Figma plugin** exports the selected frames in multiple sizes.  
3. Plugin sends the images + metadata to your backend.  
4. Backend stores the assets, then calls an LLM with your custom instructions.  
5. LLM returns structured ad copy.  
6. Backend saves the output as an **Ad Creative Set**.  
7. Web app displays:  
   - Images for each size  
   - Download button for all variants (zip)  
   - Headlines (each row with its own copy button)  
   - Primary texts (each row with its own copy button)  
   - Descriptions (text areas, each with a copy button)  
8. User can mark the creative set status as **Draft** or **Posted**.

---

# 2. Architecture Overview

## Components

- **Figma Plugin (JS/TS)**  
  Runs inside Figma, collects selected frames, exports them, and sends to backend.

- **Backend API**  
  Handles uploads, LLM calls, and storage.  
  Suggested stacks:
  - Next.js (API Routes + React UI)  
  - or Rails + Hotwire/Stimulus

- **Database**  
  PostgreSQL or similar.

- **Storage**  
  S3 for image assets.

- **LLM Service**  
  OpenAI or your preferred LLM provider.

- **Web UI**  
  Renders creatives and copy variants + download features.

---

# 3. Data Model

## `creative_sets`
Represents one concept imported from Figma.

| Field | Type | Notes |
|-------|-------|-------|
| id | UUID | Primary key |
| name | string | From Figma frame name |
| figma_file_id | string | Optional |
| figma_node_id | string | Optional |
| brand_name | string | - |
| campaign_name | string | - |
| audience_description | text | - |
| status | enum | `pending_llm` / `ready` / `failed` |
| publication_state | enum | **`draft` / `posted`** |
| created_by_user_id | uuid | Optional |
| created_at | timestamp | - |
| updated_at | timestamp | - |

## `creative_assets`
Each exported image size.

| Field | Type | Notes |
|-------|-------|-------|
| id | UUID | - |
| creative_set_id | UUID | FK |
| size_label | string | e.g. "1080x1080" |
| width | int | - |
| height | int | - |
| file_url | string | S3 path |
| created_at | timestamp | - |

## `copy_variants`
Each copy item generated by the LLM.

| Field | Type | Notes |
|-------|-------|-------|
| id | UUID | - |
| creative_set_id | UUID | FK |
| type | enum | `headline` / `primary_text` / `description` |
| text | text | content |
| order_index | int | ordering |
| created_at | timestamp | - |

---

# 4. API Contracts

## Figma Plugin ‚Üí Backend  
**POST `/api/creatives/import`**

### Payload example
```json
{
  "figma_file_id": "abcd1234",
  "figma_node_id": "1:45",
  "name": "Summer sale ‚Äì 20% off",
  "brand_name": "BrandCo",
  "campaign_name": "Summer 2025",
  "audience_description": "SaaS founders who want clean workflows",
  "publication_state": "draft",
  "images": [
    {
      "size_label": "1080x1080",
      "width": 1080,
      "height": 1080,
      "content_type": "image/png",
      "data_base64": "iVBORw0KGgoAAA..."
    },
    {
      "size_label": "1200x628",
      "width": 1200,
      "height": 628,
      "content_type": "image/png",
      "data_base64": "iVBORw0KGgoBBB..."
    },
    {
      "size_label": "1080x1920",
      "width": 1080,
      "height": 1920,
      "content_type": "image/png",
      "data_base64": "iVBORw0KGgoCCC..."
    }
  ],
  "copy_instructions": "Performance-focused FB/IG ads for SaaS."
}

Backend Response

json
{
  "creative_set_id": "cs_123",
  "status": "pending_llm"
}

5. LLM Prompt + Output Format

System Prompt
You are an expert performance marketer who writes static paid social ad copy.
Return valid JSON only.

Schema:
{
  "headlines": ["string"],
  "primary_texts": ["string"],
  "descriptions": ["string"]
}

Constraints:
- Headlines: ‚â§ 40 chars
- Primary texts: 1‚Äì3 short sentences, ‚â§ 180 chars
- Descriptions: ‚â§ 300 chars
- No emojis, no hashtags
- Tone: clear, confident, simple

User Prompt Example
Brand: BrandCo
Campaign: Summer 2025
Audience: SaaS founders and content agencies
Platform: Meta (FB + IG)
Angle: less chaos, more clarity
Please provide 5 headlines, 5 primary texts, 3 descriptions.

Expected Output
{
  "headlines": [
    "Turn content chaos into a system",
    "A cleaner way to ship ads",
    "Your workflow, simplified",
    "Less admin, more output",
    "Make campaigns repeatable"
  ],
  "primary_texts": [
    "Stop juggling folders and chats. Centralise your workflow.",
    "Move your creative process into one clean workspace.",
    "Ship more ads with fewer mistakes.",
    "Keep every version and asset organised.",
    "A calmer, faster way to get campaigns live."
  ],
  "descriptions": [
    "One shared place for creative, copy and feedback.",
    "Replace scattered tools with a clean process.",
    "Give your team structure without slowing them down."
  ]
}

6. UI Layout

Creative Detail Page

Top Section: Image + Download
	‚Ä¢	Large preview of selected image size
	‚Ä¢	Thumbnails for other sizes
	‚Ä¢	Metadata: name, brand, campaign
	‚Ä¢	Download All Sizes (zip) button
	‚Ä¢	Dropdown: Publication State ‚Üí Draft / Posted
	‚Ä¢	Optional: ‚ÄúRe-generate copy‚Äù

‚∏ª

Headlines Section
	‚Ä¢	Title: Headlines
	‚Ä¢	Each headline in a row:
	‚Ä¢	Left: read-only input
	‚Ä¢	Right: copy-to-clipboard icon
	‚Ä¢	Example:

    [ Turn content chaos into a system ] [üìã]

Primary Texts Section
	‚Ä¢	Title: Primary Texts
	‚Ä¢	Rows or stacked multiline inputs
	‚Ä¢	Each with its own [üìã] button

‚∏ª

Descriptions Section
	‚Ä¢	Title: Descriptions
	‚Ä¢	Text areas with copy buttons
	‚Ä¢	Might show one as ‚Äúprimary‚Äù and others as alternates

‚∏ª

7. Download Mechanism

GET /api/creatives/:id/download

Backend generates a zip containing all image assets:
brand_campaign_1080x1080.png
brand_campaign_1200x628.png
brand_campaign_1080x1920.png

Streams file to the browser.

8. MVP vs Future Enhancements

MVP
	‚Ä¢	Figma plugin exporting images in three sizes
	‚Ä¢	Backend storing images + calling LLM
	‚Ä¢	Render creative detail page
	‚Ä¢	Lists of headlines, primary texts, descriptions
	‚Ä¢	Copy buttons
	‚Ä¢	Download-all button
	‚Ä¢	Publication State: Draft / Posted

Future
	‚Ä¢	Brand libraries with tone presets
	‚Ä¢	Multiple instruction profiles (Meta / Google / LinkedIn)
	‚Ä¢	Editable and locked copy variants
	‚Ä¢	Multi-user teams + permissions
	‚Ä¢	Version control per creative
	‚Ä¢	A/B testing integration
	‚Ä¢	AI ‚Äúrewrite‚Äù or ‚Äúimprove‚Äù buttons

‚∏ª

9. Summary

This plan gives you:
	‚Ä¢	A clean pipeline from Figma ‚Üí Backend ‚Üí LLM ‚Üí UI
	‚Ä¢	A simple but scalable data model
	‚Ä¢	Deterministic JSON output from the LLM
	‚Ä¢	Clear UI structure for creative review
	‚Ä¢	Status management via Draft / Posted
	‚Ä¢	A self-contained MVP you can build fast
